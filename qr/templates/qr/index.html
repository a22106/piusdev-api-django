
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <h1>QR Code Generator</h1>
    <form action="/" method="post">
        <label>
            {% csrf_token %}
            <input type="text" name="url" placeholder="Enter URL" required>
        </label>
        <button type="submit">Generate QR Code</button>
    </form>

    {% if qr_text %}
    <h2>Generated QR Code:</h2>
    <img id="qr-code" alt="QR Code">
    <p>QR Code for: {{ qr_text }}</p>
    <script>
        fetch("{% url 'qr_image' %}", {
            method: "POST",
            headers: {
                "Content-Type": "application/x-www-form-urlencoded",
                "X-CSRFToken": "{{ csrf_token }}"
            },
            body: "text={{ qr_text|urlencode }}"
        })
        .then(response => response.blob())
        .then(blob => {
            const img = document.getElementById("qr-code");
            img.src = URL.createObjectURL(blob);
        });
    </script>
    {% endif %}

</body>
</html>